#!/usr/bin/env bash

if [[ -s "$extension_templates_path/nginx.conf.template" ]] ; then
  ensure_paths_exist "$nginx_config_path" "$nginx_servers_path"

  # nginx.conf.template => /etc/nginx.conf
  cp "$extension_templates_path/nginx.conf.template" \
    "/etc/nginx/nginx.conf"

  # nginx_ctl.template => ${init_scripts_path}/nginx
  cp "${extension_templates_path}/nginx_ctl.template" \
    "${init_scripts_path}/nginx"

  # ${template}.template => /etc/nginx/conf/${template}
  for template in proxy.conf mime.types ; do
    cp "$extension_templates_path/${template}.template" \
      "/etc/nginx/conf/${template}"
  done
else
  fail "$extension_templates_path/nginx.conf.template is missing."
fi

