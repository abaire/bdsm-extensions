#!/usr/bin/env bash

# TODO: refactor the argument processing.
while [[ $# -gt 0 ]] ; do
  token="$1" ; shift
  case "$token" in
    --trace)   set -o xtrace          ;;
    --version) version="$1"   ; shift ;;
    --url)     redis_url="$1" ; shift ;;
    *)         fail "Unknown command line argument for bdsm redis: '$token'" ;;
  esac
done

download_redis

extract_redis

build_redis

install_redis

setup_redis_user

create_redis_directories

install_init_script

install_redis_conf

log "Installation Complete."

exit 0
